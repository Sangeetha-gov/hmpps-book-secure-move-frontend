{% extends "form-wizard.njk" %}

{% block fields %}
  {% if previousAssessment %}
    <div class="govuk-!-margin-bottom-6">
      <h2 class="govuk-heading-m govuk-!-margin-bottom-2">
        {{ t('assessment::heading.text', {
          context: previousAssessment.key + "_nomis"
        }) }}
      </h2>

      {% for panel in previousAssessment.panels %}
        {% call appPanel(panel) %}
          {{ appMetaList({
            classes: "app-meta-list--divider",
            items: panel.items
          }) }}
        {% endcall %}
      {% else %}
        {{ appMessage({
          classes: "app-message--muted govuk-!-margin-top-2",
          allowDismiss: false,
          content: {
            text: t('assessment::no_items.text', {
              context: previousAssessment.key + "_nomis"
            })
          }
        }) }}
      {% endfor %}

      {% set html %}
        <p>
          {{ t("assessment::retrieved_from_nomis.details.content.lede") }}
        </p>

        <ul>
          <li>
            {{ t("assessment::retrieved_from_nomis.details.content.step_one") }}
          </li>
          <li>
            {{ t("assessment::retrieved_from_nomis.details.content.step_two") }}
          </li>
          <li>
            {{ t("assessment::retrieved_from_nomis.details.content.step_three") }}
          </li>
        </ul>
      {% endset %}

      {{ govukDetails({
        classes: "govuk-!-margin-top-3",
        summaryText: t("assessment::retrieved_from_nomis.details.summary"),
        html: html
      }) }}
    </div>
  {% endif %}

  {{ super() }}
{% endblock %}
